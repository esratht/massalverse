<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zodiac Gölge Yansıması</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    
    <style>
        /* CSS: GÖMÜLÜ GLITCH VE TEMA */

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background-color: #050505; 
            color: #ff00ff;
            font-family: 'Fira Code', monospace;
            min-height: 100vh;
            display: flex; justify-content: center; align-items: center; 
        }
        .container { 
            width: 95%; max-width: 700px;
            padding: 20px;
        }

        /* GLITCH VE SCANLINES */
        .scan-lines {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -1;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.2) 0px,
                rgba(0, 0, 0, 0.2) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
        }
        p, .metric-item, .screen h1, .btn {
            text-shadow: 1px 0 0 rgba(255, 0, 255, 0.7), -1px 0 0 rgba(0, 255, 255, 0.7);
        }
        .screen.active {
            animation: flicker 0.15s infinite alternate;
        }
        @keyframes flicker {
            0% { opacity: 1; }
            50% { opacity: 0.95; }
            100% { opacity: 1; }
        }
        /* GLITCH SONU */

        .screen { 
            border: 2px solid #ff00ff; 
            background: rgba(30, 0, 30, 0.5); 
            padding: 30px; 
            text-align: center;
            display: flex; 
            flex-direction: column;
        }
        .screen h1 { 
            font-family: 'Orbitron'; color: #fff; 
            text-shadow: 0 0 10px #ff00ff; margin-bottom: 10px;
        }
        
        /* Burç Seçim Kutusu */
        #sign-selector {
            padding: 10px; margin-top: 20px; font-size: 1rem;
            background: rgba(0, 0, 0, 0.4); color: #ff00ff;
            border: 1px solid #ff00ff; font-family: 'Fira Code';
        }

        .btn {
            padding: 15px 30px; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; border: none; transition: 0.3s;
        }
        .btn-submit { 
            background: #ff00ff; color: #000; 
            margin-top: 20px; 
        }
        .btn-submit:hover { background: #fff; box-shadow: 0 0 15px #ff00ff; }

        .btn-outline { 
            background: transparent; border: 1px solid #555; color: #555; 
            padding: 10px 20px; margin-top: 10px;
        }
        .btn-outline:hover { color: #fff; border-color: #fff; }

        /* Sonuç Ekranı */
        .result-box {
            padding: 20px; border: 2px solid #00ff00; background: rgba(0, 30, 0, 0.5);
            margin-top: 20px; text-align: left;
        }
        .archetype-result { 
            font-size: 1.4rem; font-weight: bold; color: #ff00ff; 
            margin-bottom: 15px; text-align: center;
        }
        .metric-item {
            border-left: 3px solid #00ff00; padding: 10px 0 10px 15px; margin-bottom: 10px;
        }
        .metric-item strong { color: #00ff00; font-size: 0.9rem; display: block; margin-bottom: 5px; }
        .metric-item p { color: #ccc; font-size: 0.85rem; }
    </style>
</head>
<body>
    <div class="scan-lines"></div>

    <div class="container">
        <div id="selection-screen" class="screen active">
            <h1>ZODIAC GÖLGE YANSIMASI</h1>
            <p><strong>URANÜS KURALI:</strong> Her burcun bir gölgesi vardır. Hangi kodun en derin yaralarını taşıdığını görmek için doğum burcunu seç.</p>
            <p style="color: #ff00ff;">(Bu analiz, geleneksel yorumlar yerine burcunun zorlanma kodlarını verecektir.)</p>
            
            <select id="sign-selector">
                <option value="" disabled selected>— Burcunu Seç —</option>
                <option value="KOÇ">KOÇ</option>
                <option value="BOĞA">BOĞA</option>
                <option value="İKİZLER">İKİZLER</option>
                <option value="YENGEÇ">YENGEÇ</option>
                <option value="ASLAN">ASLAN</option>
                <option value="BAŞAK">BAŞAK</option>
                <option value="TERAZİ">TERAZİ</option>
                <option value="AKREP">AKREP</option>
                <option value="YAY">YAY</option>
                <option value="OĞLAK">OĞLAK</option>
                <option value="KOVA">KOVA</option>
                <option value="BALIK">BALIK</option>
            </select>

            <button class="btn btn-submit" onclick="testButtonFunction()">ANALİZİ BAŞLAT</button>
            <a href="../index.html" class="btn btn-outline">GERİ DÖN</a>
        </div>

        <div id="result-screen" class="screen" style="display: none;">
            <h1>GÖLGE ANALİZ RAPORU</h1>
            <div class="result-box">
                <p id="archetype-description-top" style="text-align: center; color: #ff4500; font-style: italic;"></p>
                <p id="archetype-result" class="archetype-result"></p>
                
                <h2>DEĞİŞKEN ANALİZ METRİKLERİ:</h2>
                <div id="metrics-output">
                    </div>
            </div>
            <button class="btn btn-submit" onclick="location.reload()">YENİ ANALİZ (TEKRAR DEĞİŞECEK)</button>
            <a href="../index.html" class="btn btn-outline">ANA MENÜYE DÖN</a>
        </div>
    </div>

    <script>
        // ZODIAC.JS İÇERİĞİ (GÖMÜLÜ VE CSP UYUMLU)

        const ZODIAC_DATA = {
            "KOÇ": { shadow: "ACEMİ SAVAŞÇI", focus: "Sabırsızlık, bitmeyen acele.", conflict: "İradenin körü körüne kullanımı." },
            "BOĞA": { shadow: "KİLİTLİ DEĞER", focus: "Değişime mutlak direnç, birikim saplantısı.", conflict: "Rahatlık uğruna potansiyeli feda etme." },
            "İKİZLER": { shadow: "YANKI ODASI", focus: "İki yüzlülük, yüzeysellik, gerçeği çarpıtma.", conflict: "Duygu yerine mantığı silah olarak kullanma." },
            "YENGEÇ": { shadow: "KABUKLU BAĞIMLI", focus: "Korkuyla geri çekilme, duygusal şantaj.", conflict: "Koruma ihtiyacını manipülasyona çevirme." },
            "ASLAN": { shadow: "SAHTE TAÇ", focus: "Kibir, onaylanma bağımlılığı, gösteriş.", conflict: "Sevgiden çok alkışa ihtiyaç duyma." },
            "BAŞAK": { shadow: "KUSUR BULUCU", focus: "Aşırı eleştiri, mükemmeliyetçilikle felç olma.", conflict: "Hizmeti, hizmetkârlığa dönüştürme." },
            "TERAZİ": { shadow: "ADALET KAÇAĞI", focus: "Kararsızlık, yüzleşmekten kaçınma, pasif agresiflik.", conflict: "Güzellik uğruna gerçeği eğme." },
            "AKREP": { shadow: "KÜL ALANI", focus: "Kontrol saplantısı, intikam arzusu, şüphecilik.", conflict: "Dönüşümü, yıkım için kullanma." },
            "YAY": { shadow: "BİLGE GEZGİN", focus: "Fanatizm, ukalalık, bağlanmaktan kaçınma.", conflict: "Gerçeklerden kaçmak için felsefeye sığınma." },
            "OĞLAK": { shadow: "BETON BABALIK", focus: "Duygusuzluk, katılık, aşırı görev bilinci.", conflict: "Kariyeri, insanlığa tercih etme." },
            "KOVA": { shadow: "SOĞUK DAHİ", focus: "Duygusal kopukluk, üstünlük kompleksi, radikallik.", conflict: "Bireyselliği yalnızlığa çevirme." },
            "BALIK": { shadow: "AKINTIYA KAPILAN", focus: "Mağduriyet, kaçış, net sınırlar koyamama.", conflict: "Kırılganlığı güçsüzlük sanma (Kırık Kadeh)." }
        };

        const ANALYSIS_METRICS = [
            { code: "MARS VURUCU YÖN", title: "Mars Vurucu Eylem: Enerjiyi nereye kanalize etmelisin?", action: (data) => `Şu anki enerjini, ${data.shadow} ile yüzleşmek için kullanmalısın. Gecikme, Mars'ın ataleti affetmeyeceğini unutma.` },
            { code: "SATÜRN SINIR AÇISI", title: "Satürn Sınır: En zorlanacağın kısıtlama ne olacak?", action: (data) => `Senin için en zorlu kısıtlama, ${data.conflict} etrafında yoğunlaşıyor. Bu, sistemi kırmak için gereken ilk duvardır.` },
            { code: "MERKÜR'ÜN ÇARPITMASI", title: "Merkür'ün Çarpıtması: Zihninin seni nasıl yanılttığı?", action: (data) => `Zihnin seni, ${data.focus} hakkında sürekli yalan söylüyor. Sen yazarın sesini, bu yalanı örtmek için kullanıyorsun.` },
            { code: "JÜPİTER'İN KİLİDİ", title: "Jüpiter'in Kilidi: En büyük potansiyelindeki tıkanıklık.", action: (data) => `En büyük genişleme (Jüpiter) potansiyelin, ${data.focus} yüzünden kilitlenmiş durumda. Külün üstünde yürümek için bu kilidi açmalısın.` }
        ];

        function generateShadowReport(sign) {
            const data = ZODIAC_DATA[sign];
            if (!data) {
                return { archetype: "SİNYAL YOK", report: "Bilinmeyen Burç Kodu algılandı. Yeniden Dene.", metrics: [] };
            }

            const shuffledMetrics = ANALYSIS_METRICS.sort(() => 0.5 - Math.random());
            const selectedMetrics = shuffledMetrics.slice(0, 3); 

            const reportMetrics = selectedMetrics.map(metric => ({
                code: metric.code,
                title: metric.title,
                analysis: metric.action(data)
            }));

            return {
                archetype: data.shadow,
                report: `Yolcu, seçtiğin burç (${sign})'un derinliklerinde, senin gölge arketipin olan **${data.shadow}** kodunu buldum. Bu, yüzleşmen gereken en büyük zayıflığı temsil eder.`,
                metrics: reportMetrics
            };
        }
        
        // --- NİHAİ TEST VE ARAYÜZ İŞLEMLERİ ---

        function switchScreen(id) {
            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById(id).style.display = 'flex';
        }

        // TEST FONKSİYONU: Önce bu çalışacak
        function testButtonFunction() {
            const selector = document.getElementById('sign-selector');
            if (!selector.value || selector.value === "") {
                alert("UYARI: Analizden önce burcunu seçmelisin!");
                return;
            }
            
            startAnalysis(selector.value);
        }

        function startAnalysis(sign) {
            const reportData = generateShadowReport(sign); 
            
            document.getElementById('archetype-description-top').innerText = reportData.report;
            document.getElementById('archetype-result').innerText = reportData.archetype;
            
            const metricsOutput = document.getElementById('metrics-output');
            metricsOutput.innerHTML = '';

            // Dinamik Metrikleri Yükle
            reportData.metrics.forEach(metric => {
                const item = document.createElement('div');
                item.classList.add('metric-item');
                item.innerHTML = `
                    <strong>${metric.code} (${metric.title})</strong>
                    <p>${metric.analysis}</p>
                `;
                metricsOutput.appendChild(item);
            });

            switchScreen('result-screen');
        }
        
        document.addEventListener('DOMContentLoaded', () => {
             document.getElementById('selection-screen').classList.add('active');
        });
    </script>
</body>
</html>